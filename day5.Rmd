---
title: "day3"
date: "2024-12-05"
---

```{r library}
library(stringr)
library(readr)
library(sjmisc)
```

```{r import}
# Set the file path
file_path <- "day5_input.txt"
# Read the file using readLines()
file_content <- readLines(file_path)

rules <- file_content[1:1176]
pages <- file_content[1178:1359]

# Set the file path
file_path_test <- "day5_test_input.txt"
# Read the file using readLines()
file_content_test <- readLines(file_path_test)

rules_test <- file_content_test[1:21]
pages_test <- file_content_test[23:28]

```

```{r functions}

#Part 1
pages_split <- str_split(pages,",")
rules_split <- str_split(rules,"\\|")

logicals <- vector(mode = "list", length = length(pages_split))
violate_flag <- FALSE
#diagonal up and left instances
for (i in 1:length(pages_split)){
  
  for (j in 1:length(pages_split[[i]])){
    
    for (k in 1:length(rules_split)){
      x <- str_match_all(pages_split[[i]],rules_split[[k]][1])
      y <- str_match_all(pages_split[[i]],rules_split[[k]][2])
      
      x_id <- which(lengths(x)!=0)
      y_id <- which(lengths(y)!=0)
      
        if ((identical(x_id, integer(0))) | (identical(y_id, integer(0)))) {
              violate_flag <- FALSE
              logicals[[i]] <- "Valid"
        } else if (x_id < y_id){
              violate_flag <- FALSE
              logicals[[i]] <- "Valid"
        } else if (x_id > y_id){
              violate_flag <- TRUE
              break
        }
    }
      
    if (isTRUE(violate_flag)){
      logicals[[i]] <- "Violated Rules"
      break
    }
  }
}

valid_ind <- str_match_all(logicals,"Valid")
valid_pages <- pages_split[which(lengths(valid_ind)!=0)]

totals <- 0
for (i in 1:length(valid_pages)){
  temp <- ceiling(length(valid_pages[[i]])/2)
  totals <- totals + as.integer(valid_pages[[i]][temp])
}

pt1_solution <- totals

```

```{r main}

# Part 2
invalid_ind <- str_match_all(logicals,"Violated Rules")
invalid_pages <- pages_split[which(lengths(invalid_ind)!=0)]



```

```{r tests}

```